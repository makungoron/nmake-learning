# 01-hello_world

2つのC++ファイル (main.cpp, lib.cpp) のみを使ってHello Worldを出力するだけのシンプルなプログラム。

実用上、どんなに小さいソフトウェアでも複数のファイルに分けて開発するほうが多いため、Hello Worldだとしても複数のファイルに分けてみました。

## ソースの説明

- src/
  - main.cpp: main関数があるプログラム。`lib.cpp`内の`hello()`を呼び出すだけ。
  - lib.cpp: `hello()`の実装が書かれているプログラム
- include/
  - lib.h: lib.cppに対応するヘッダファイル。hello()の前方宣言が書かれています。

## 出力物

以下のフォルダはnmake実行時に存在しなくても、勝手に作られるようにしてます。

- `obj/`: 各cppファイルのビルド結果であるオブジェクトファイルが出力される。
- `bin/`: 最終的な実行ファイルが出力される。

## Makefileのポイント

- コメントは`#`で始めます。GNU makeと同じです。

- NMAKE自体が持っているコマンドのようなものは`!`から始まります。
  - **プリプロセス ディレクティブ**と呼ばれているようです。
  - ここでは`!MESSAGE`を使用しています。これはGNUでいう`echo`のようなもので、標準出力にテキストを出力するものです。

- `@if NOT EXIST $(@D) mkdir $(@D)`について
  - これは、**出力物を出力するディレクトリがなかったら、そのディレクトリを作成する**という操作になります。
  - WindowsのコマンドラインにはUNIX系の`mkdir -p`のような「存在していなかったら作る」というオプションが無いので、このような分岐を書いて実現しています。
  - このフォルダにおいては`bin`と`obj`が自動で作成されます。
  - リンク時は`$(@D)`ではなく`$(BIN_DIR)`を直接指定しています。これについては当該ブロックでは`$(@D)`が`.`になってしまうためです。

- `$(CPP)` (=`cl.exe`)に対しても`/nologo`を渡しています。
  - これがないとコピーライト表示が各cppのビルドに対して毎回出てきます。

- このプロジェクトでは、**`src/`直下のファイルしかターゲットになりません**。
  - `src/`以下にさらにディレクトリが掘られている場合は別の実装が必要です。
